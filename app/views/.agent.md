# View Development Guidelines

## UI/UX Design System Rules

### TailwindCSS Design System
The codebase uses TailwindCSS v4.x with a custom design system:
- **Always reference** `app/assets/tailwind/maybe-design-system.css` for base primitives, functional tokens, and component tokens
- **Use functional tokens** over raw values:
  - `text-primary` instead of `text-white`
  - `bg-container` instead of `bg-white`
  - `border border-primary` instead of `border border-gray-200`
- **Never modify** design system files without explicit permission
- **Always generate semantic HTML**

## Component vs Partial Decision Making

### Use ViewComponents When:
- Element has complex logic or styling patterns
- Element will be reused across multiple views/contexts
- Element needs structured styling with variants/sizes (buttons, badges)
- Element requires interactive behavior or Stimulus controllers
- Element has configurable slots or complex APIs
- Element needs accessibility features or ARIA support

### Use Partials When:
- Element is primarily static HTML with minimal logic
- Element is used in only one or few specific contexts
- Element is simple template content (CTAs, static sections)
- Element doesn't need variants, sizes, or complex configuration
- Element is more about content organization than reusable functionality

### Preference Order
1. If component exists in `app/components`, use it
2. If no component, look for existing partial
3. If neither exists, decide based on criteria above

## Examples of Component vs Partial Usage

```erb
<%# Component: Complex, reusable with variants and interactivity %>
<%= render DialogComponent.new(variant: :drawer) do |dialog| %>
  <% dialog.with_header(title: "Account Settings") %>
  <% dialog.with_body { "Dialog content here" } %>
<% end %>

<%# Component: Interactive with complex styling options %>
<%= render ButtonComponent.new(text: "Save Changes", variant: "primary", confirm: "Are you sure?") %>

<%# Component: Reusable with variants %>
<%= render FilledIconComponent.new(icon: "credit-card", variant: :surface) %>

<%# Partial: Static template content %>
<%= render "shared/logo" %>

<%# Partial: Simple, context-specific content with basic styling %>
<%= render "shared/trend_change", trend: @account.trend, comparison_label: "vs last month" %>

<%# Partial: Simple divider/utility %>
<%= render "shared/ruler", classes: "my-4" %>

<%# Partial: Simple form utility %>
<%= render "shared/form_errors", model: @account %>
```

## Keep Domain Logic Out of Views

```erb
<%# BAD!!! %>
<%# This belongs in the component file, not the template file! %>
<% button_classes = { class: "bg-blue-500 hover:bg-blue-600" } %>
<%= tag.button class: button_classes do %>
  Save Account
<% end %>

<%# GOOD! %>
<%= tag.button class: computed_button_classes do %>
  Save Account
<% end %>
```

## Stimulus Integration in Views

### Declarative Approach
Always use the **declarative approach** when integrating Stimulus controllers:
- ERB template declares what happens
- Stimulus controller responds
- Refer to `app/javascript/controllers/.agent.md` for detailed conventions

### Good Stimulus Integration Example

```erb
<!-- Declarative - HTML declares what happens -->
<div data-controller="toggle">
  <button data-action="click->toggle#toggle" data-toggle-target="button">Show</button>
  <div data-toggle-target="content" class="hidden">Hello World!</div>
</div>
```

### Controller Placement Guidelines
- **Component controllers** (`app/components/`) only within their component templates
- **Global controllers** (`app/javascript/controllers/`) can be used across any view
- Pass data from Rails to Stimulus using `data-*-value` attributes, not inline JavaScript
- Use Stimulus targets to reference DOM elements, not manual `getElementById` calls

## Naming Conventions

### Components
- Use `ComponentName` suffix (e.g., `ButtonComponent`, `DialogComponent`, `FilledIconComponent`)

### Partials
- Use underscore prefix (e.g., `_trend_change.html.erb`, `_form_errors.html.erb`, `_sync_indicator.html.erb`)
- **Shared partials**: Place in `app/views/shared/` directory for reusable content
- **Context-specific partials**: Place in relevant controller view directory (e.g., `accounts/_account_sidebar_tabs.html.erb`)